<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data sources</title>
    <link href="{{ url_for('data_sources_static', path='css/style.css') }}" rel="stylesheet">
</head>
<body>
<div class="container">
    <aside>
        <div class="aside-title">
            <a href="/"><i class="fas fa-home" style="color: white;"></i></a>
            <h1 style="margin-left: 5px;">Data Sources</h1>
        </div>
        {% include 'base/html/project_nav_links.html' %}
    </aside>
    <main>
        <div class="grid" id="dataSourceGrid">
          <div class="card card-new" id="addDataSourceButton">
            <p>
              Create New
            </p>
          </div>
          {% for source in sources %}
            <div class="card" data-project-dir="{{ project_dir }}" data-source-dir="{{ source.directory }}">
                <div class="card-content">
                  <div>
                    <h3 style="display: inline;">{{ source.name }}</h3>
                    {% if DATA_SOURCE_REGISTRY[source.type].icon %}
                      <img 
                        src="{{ url_for('data_sources_static', path='img/' + DATA_SOURCE_REGISTRY[source.type].icon) }}" 
                        alt="{{ source.type }} icon"
                        style="width: 20px; height: 20px; display: inline;">
                    {% endif %}
                  </div>
                  <p>{{ source.description }}</p>

                  {% if 'last_sync' in source %}
                    <div style="font-size: 10px;">
                      <i class="fas fa-sync-alt" id="syncSource" onclick="syncSource('{{ source.directory }}', '{{ project_dir }}')"></i>
                      <i>
                        Last sync: {{ source.last_sync }}
                      </i>
                    </div>
                  {% endif %}
                </div>
            </div>
          {% endfor %}
        </div>
    </main>

    <!-- Modals -->
    <!-- Create Source Modal -->
    {% include 'data_sources/modals.html' %}

    <!-- JS scripts -->
    <!-- Create Source Modal-->
    <!-- File Type Filter-->
    <script src="{{ url_for('data_sources_static', path='js/script.js') }}"></script>
</div>
</body>
</html>
